### **【位操作核心战术手册 V2.0】**





#### **一号战术：单点置位 (Single-Bit SET)**



- **任务目标：** 将指定的某一位 `n`，强制设为 **1**。
- **标准指令：** `var = var | (1 << n);`
- **工具比喻：** **印章 `|`**。
- **战术分解：**
  1. `(1 << n)`: 制造一个只在 `n` 位是 `1` 的“印章”。
  2. `var | ...`: 将“印章”盖在 `var` 上，由于“有1就1”，`n` 位被强制染成 `1`。
- **实战范例：** 将 `var = 16 (00010000)` 的 **第1位** 置位。
  - `var = 16 | (1 << 1);`
  - `var = 00010000 | 00000010;`
  - `var` 变为 `00010010` (十进制 18)。



#### **二号战术：单点清零 (Single-Bit CLEAR)**



- **任务目标：** 将指定的某一位 `n`，强制设为 **0**。
- **标准指令：** `var = var & ~(1 << n);`
- **工具比喻：** **遮罩板 `&`** 配合 **取反器 `~`** (外科手术)。
- **口诀回顾：** “移位定位，取反做罩，与门开刀”
- **战术分解：**
  1. `(1 << n)`: 制造一个只在 `n` 位是 `1` 的“定位器”。
  2. `~(...)`: 对“定位器”取反，得到一个只在 `n` 位是 `0` 的“手术罩”。
  3. `var & ...`: 执行手术，由于“都1才1”，`n` 位因为罩是 `0` 而被强制变成 `0`。
- **实战范例：** 将 `var = 18 (00010010)` 的 **第4位** 清零。
  - `var = 18 & ~(1 << 4);`
  - `var = 00010010 & ~(00010000);`
  - `var = 00010010 & 11101111;`
  - `var` 变为 `00000010` (十进制 2)。



#### **三号战术：单点翻转 (Single-Bit FLIP/TOGGLE)**



- **任务目标：** 将指定的某一位 `n` 的状态**颠倒** (0变1, 1变0)。
- **标准指令：** `var = var ^ (1 << n);`
- **工具比喻：** **开关 `^`**。
- **战术分解：**
  1. `(1 << n)`: 制造一个只在 `n` 位是 `1` 的“开关按钮”。
  2. `var ^ ...`: 按下 `n` 号按钮，由于“不同为1，相同为0”，`n` 位状态被翻转。
- **实战范例：** 将 `var = 2 (00000010)` 的 **第1位** 和 **第0位** 先后翻转。
  - `var = 2 ^ (1 << 1);`  // `00000010 ^ 00000010` -> `00000000` (var变为0)
  - `var = 0 ^ (1 << 0);`  // `00000000 ^ 00000001` -> `00000001` (var变为1)



#### **四号战术：单点检查 (Single-Bit CHECK)**



- **任务目标：** **判断**指定的某一位 `n` 是否为 **1**，**不改变**原值。
- **标准指令：** `if (var & (1 << n)) { ... }`
- **工具比喻：** **遮罩板 `&`**。
- **战术分解：**
  1. `(1 << n)`: 制造一个只在 `n` 位有孔的“遮罩板”。
  2. `var & ...`: 用遮罩板过滤 `var`。
  3. `if (...)`: 如果结果不为0，说明 `n` 位是 `1`（看到了亮光）；如果结果为0，说明 `n` 位是 `0`。
- **实战范例：** 检查 `var = 17 (00010001)` 的 **第4位** 是否为1。
  - `if (17 & (1 << 4))`
  - `if (00010001 & 00010000)`
  - 结果是 `00010000` (16)，不为0，因此条件为真。

------



### **【速记卡：核心指令集】**



| 任务目标 (MISSION)                  | C语言标准指令 (COMMAND)  |
| ----------------------------------- | ------------------------ |
| 将 `n` 位置为 **1** (SET)           | `var = var | (1 << n);`  |
| 将 `n` 位置为 **0** (CLEAR)         | `var = var & ~(1 << n);` |
| 将 `n` 位 **翻转** (FLIP)           | `var = var ^ (1 << n);`  |
| **检查** `n` 位是否为 **1** (CHECK) | `if (var & (1 << n))`    |